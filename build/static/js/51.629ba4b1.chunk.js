"use strict";(self.webpackChunkreact_setup=self.webpackChunkreact_setup||[]).push([[51],{6051:function(e,n,r){r.r(n),r.d(n,{default:function(){return k}});var t=r(2791),s=r(3092),c=r(1413),a=r(5861),o=r(885),i=r(7757),l=r.n(i),d=r(5633),u=r(9389),p=r(6416),h=r(184),m=function(e){var n=e.className,r=e.style;e.coordinates;return t.useEffect((function(){}),[]),(0,h.jsx)("div",{className:"map ".concat(n),id:"map",style:r,children:(0,h.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.521260322283!2d106.8195613507864!3d-6.194741395493371!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f5390917b759%3A0x6b45e67356080477!2sPT%20Kulkul%20Teknologi%20Internasional!5e0!3m2!1sen!2sid!4v1601138221085!5m2!1sen!2sid",frameBorder:"0",style:{border:0,width:"100%",height:"30rem"},allowFullScreen:!1,"aria-hidden":"false",tabIndex:0,title:"map"})})},f=r(2801),x=r(6871),j=r(1743),v=r(6413),Z=r(3041),g=r(7137),C=(r(3224),function(e){var n=e.id,r=e.image,s=e.title,i=e.description,C=e.address,_=e.creator,w=e.coordinates,k=e.onDelete,E=(0,f.x)(),y=E.isLoading,N=E.error,b=E.sendRequest,D=E.clearError,T=((0,x.s0)(),(0,t.useContext)(j.V)),A=t.useState(!1),I=(0,o.Z)(A,2),L=I[0],S=I[1],P=t.useState(!1),F=(0,o.Z)(P,2),O=F[0],B=F[1],q=function(){return S(!1)},z=function(){return B(!1)},R=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Deleting..."),e.next=3,K();case 3:z();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V={show:L,onCancel:q,header:C,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,h.jsx)(u.Z,{onClick:q,children:"CLOSE"})},G={show:O,onCancel:z,header:"Are you sure",contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Z,{onClick:z,inverse:!0,children:"CANCEL"}),(0,h.jsx)(u.Z,{danger:!0,onClick:R,children:"DELETE"})]})},K=function(){var e=(0,a.Z)(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("places/".concat(n),"DELETE",null,{Authorization:"Bearer ".concat(T.token)});case 3:r=e.sent,console.log(r),k(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),M={error:N,onClear:D};return console.log(T.userId,n,_),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v.Z,(0,c.Z)({},M)),(0,h.jsx)(p.Z,(0,c.Z)((0,c.Z)({},V),{},{children:(0,h.jsx)("div",{className:"map-container",children:(0,h.jsx)(m,{coordinates:w})})})),(0,h.jsx)(p.Z,(0,c.Z)((0,c.Z)({},G),{},{children:(0,h.jsx)("p",{children:"do you want to delete this place?"})})),(0,h.jsx)("li",{className:"place-item",children:(0,h.jsxs)(d.Z,{className:"place-item__content",children:[y&&(0,h.jsx)(Z.Z,{asOverlay:!0}),(0,h.jsx)("div",{className:"place-item__image",children:(0,h.jsx)("img",{src:"".concat(g.oP).concat(r),alt:s})}),(0,h.jsxs)("div",{className:"place-item__info",children:[(0,h.jsx)("h2",{children:s}),(0,h.jsx)("h3",{children:C}),(0,h.jsx)("p",{children:i})]}),(0,h.jsxs)("div",{className:"place-item__actions",children:[(0,h.jsx)(u.Z,{inverse:!0,onClick:function(){return S(!0)},children:"view on map"}),T.userId===_&&(0,h.jsx)(u.Z,{to:"/places/".concat(n),children:" EDIT "}),T.userId===_&&(0,h.jsx)(u.Z,{danger:!0,onClick:function(){return B(!0)},children:"DELETE"})]})]})})]})}),_=function(e){var n=e.places,r=e.onDeletePlace;return 0===n.length?(0,h.jsx)("div",{className:"place-list center",children:(0,h.jsxs)(d.Z,{className:"w-100 h-48 d-flex justify-center items-center",children:[(0,h.jsx)("h2",{children:"No places found. Maybe create one?"}),(0,h.jsx)(u.Z,{to:"/places/new",children:"Share Place"})]})}):(0,h.jsx)("ul",{className:"place-list",children:t.Children.toArray(n.map((function(e){return(0,h.jsx)(C,{id:e._id,image:e.image,title:e.title,description:e.description,address:e.address,creator:e.creator,coordinates:e.coordinates,onDelete:r})})))})},w=function(){var e=(0,x.UO)().userId,n=(0,f.x)(),r=n.isLoading,s=n.error,i=n.sendRequest,d=n.clearError,u=t.useState([]),p=(0,o.Z)(u,2),m=p[0],g=p[1],C=(0,t.useContext)(j.V);t.useEffect((function(){(0,a.Z)(l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i("places/user/".concat(e),"GET",null,{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(C.token)});case 3:r=n.sent,g(r.data.places),console.log(r),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}),[i,e]);var w={error:s,onClear:d};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v.Z,(0,c.Z)({},w)),r&&(0,h.jsx)(Z.Z,{asOverlay:!0}),m&&(0,h.jsx)(_,{places:m,onDeletePlace:function(e){g((function(n){return n.filter((function(n){return n._id!==e}))}))}})]})},k=function(){return(0,h.jsx)(s.Z,{children:(0,h.jsx)(w,{})})}},3224:function(){}}]);
//# sourceMappingURL=51.629ba4b1.chunk.js.map